# 
# Aliases
# 

alias e=nvim
alias el='NVIM_APPNAME="nvim-legacy" nvim'
alias vimo='nvim -u .config/nvim-legacy/init.lua'
alias eo='nvim -u .config/nvim-legacy/init.lua'
alias g=git
alias ls='ls -a --color=auto'
alias ll='ls -lash'
alias cl='clear'
alias sa='source ~/.zshrc && exit'
alias y=yarn

alias config='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'

alias sa='source ~/.alias'

# setup tput
bold=$(tput bold)
normal=$(tput sgr0)

# ignore certain directories in fzf
export FZF_DEFAULT_COMMAND='rg --files --no-ignore --hidden --follow -g "!.git/*" -g "!*node_modules*"'

alias ls='ls --color=auto'
alias lash='ls --color=auto -lash'

# open current folder in vscode
alias c=code

alias fcd='cd $(find * -type d | fzf $@)'


# kill process
kp() {
  readonly local pid=$(lsof -i tcp:$1 | awk NR\>1 | fzf --prompt="Select process to kill " | awk '{print $2}');

  if [ ! -z "$pid" ]; then;
    kill -9 $pid;
  fi;
}


## atlassian stuff synced across machines

afmclean() {
	rm -rf node-modules/
	rm -rf .parcel-*/
	yarn cache clean
	atlas tunnel clean
	nvm use
	afm install
};

alias fixtunnel='atlas tunnel start --port 8080'

jiraupdate() {
	git fetch origin master:master
	git rebase master
	afm install
	yarn relay
	git add -u
	git commit -m 'update relay'
}

list() {
 yarn start jira-spa-issue-navigator --routes=software-list,business-list,issue-navigator-core,issue-navigator-classic --no-lazy
}

list-no-local() {
 yarn start jira-spa --routes=software-list --no-lazy --no-local
}


timeline() {
 yarn start jira-spa-issue-navigator --routes=software-timeline,business-timeline --no-lazy
}

timeline-no-local() {
 yarn start jira-spa-issue-navigator --routes=software-timeline,business-timeline --no-lazy --no-local
}

list-local() {
 yarn start jira-spa-issue-navigator --routes=software-list --no-lazy --no-local
}

nin() {
 yarn start jira-spa --routes=software-issue-navigator,issue-navigator-classic,global-issue-navigator --no-lazy
}

calendar() {
 yarn start jira-spa --routes=software-calendar,business-calendar --no-lazy
}

intellij() {
  /opt/devenv/stop-intellij-server.sh jira
  /opt/devenv/establish-intellij-connection.sh jira
}

assh() {
  atlas devenv remote ssh --profile "$@"
}

abe() {
  atlas devenv remote acquire --toolbox /home/ubuntu/jira --profile "$@"
}

atlasupgrade() {
  atlas upgrade --skip-plugins && atlas plugin upgrade -n devenv
}

alias notify="it2attention start && it2attention fireworks"
alias n="notify"

by() {
  branch=$(git rev-parse --abbrev-ref HEAD | tr -d '\n')
  echo "$branch"
  if command -v pbcopy &> /dev/null; then
	echo "pbcopy"
    echo -n "$branch" | pbcopy
  elif command -v it2copy &> /dev/null; then
	echo "it2copy"
    echo -n "$branch" | it2copy
  else
    echo "$branch"
    echo "(clipboard not available)" >&2
  fi
}
